<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Générer ma lettre de mise en demeure - Je me défends</title>
    <meta
      name="description"
      content="Créez une mise en demeure conforme en quelques étapes simples."
    />

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            animation: {
              "fade-in": "fadeIn 300ms ease-out",
              "slide-in": "slideIn 400ms ease-out",
              "grow-bar":
                "growBar 600ms cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards",
            },
            keyframes: {
              fadeIn: { "0%": { opacity: "0" }, "100%": { opacity: "1" } },
              slideIn: {
                "0%": { opacity: "0", transform: "translateY(20px)" },
                "100%": { opacity: "1", transform: "translateY(0)" },
              },
              growBar: {
                from: { width: "var(--from, 0%)" },
                to: { width: "var(--to, 0%)" },
              },
            },
          },
        },
      };
    </script>

    <style>
      :root {
        --ease-out: cubic-bezier(0.25, 0.46, 0.45, 0.94);
      }

      .step-section {
        transition: all 300ms var(--ease-out);
      }
      .step-section.hidden {
        opacity: 0;
        transform: translateX(20px);
        pointer-events: none;
        position: absolute;
      }
      .step-section.active {
        opacity: 1;
        transform: translateX(0);
        position: relative;
      }

      .field-group {
        transition: border-color 200ms ease;
      }
      .field-group.error {
        border-color: #ef4444;
        background-color: #fef2f2;
      }
      .field-group.valid {
        border-color: #10b981;
      }

      .step-indicator {
        transition: all 200ms ease;
        cursor: pointer;
      }
      .step-indicator:hover {
        transform: scale(1.05);
      }
      .step-indicator.active {
        background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        color: white;
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
      }
      .step-indicator.completed {
        background: linear-gradient(135deg, #10b981, #059669);
        color: white;
      }
      .step-indicator.pending {
        background: #f3f4f6;
        color: #6b7280;
      }
      .step-indicator:focus {
        outline: 2px solid #3b82f6;
        outline-offset: 2px;
      }

      .address-suggestions {
        max-height: 200px;
        z-index: 1000;
      }
      .suggestion-item:hover {
        background-color: #f3f4f6;
      }

      .error-message {
        animation: fadeIn 200ms ease-out;
      }
      .success-message {
        animation: fadeIn 200ms ease-out;
        color: #059669;
      }

      .mobile-nav {
        bottom: 0;
        left: 0;
        right: 0;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-top: 1px solid #e5e7eb;
      }

      @media (max-width: 768px) {
        .address-grid {
          display: flex;
          flex-direction: column;
          gap: 0.75rem;
        }
        .address-grid > * {
          width: 100%;
        }
        .step-indicators-nav {
          display: none;
        }
      }

      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }

      .auto-save-indicator {
        position: fixed;
        top: 1rem;
        right: 1rem;
        padding: 0.75rem 1rem;
        border-radius: 0.5rem;
        font-size: 0.875rem;
        font-weight: 500;
        transform: translateY(-100px);
        transition: transform 250ms ease;
        z-index: 50;
      }
      .auto-save-indicator.show {
        transform: translateY(0);
      }
      .auto-save-indicator.success {
        background: #10b981;
        color: white;
      }
      .auto-save-indicator.error {
        background: #ef4444;
        color: white;
      }
      .auto-save-indicator.saving {
        background: #3b82f6;
        color: white;
      }

      .tooltip {
        position: relative;
      }
      .tooltip:hover .tooltip-text {
        opacity: 1;
        visibility: visible;
      }
      .tooltip-text {
        position: absolute;
        bottom: 125%;
        left: 50%;
        transform: translateX(-50%);
        background: #1f2937;
        color: white;
        padding: 0.5rem;
        border-radius: 0.375rem;
        font-size: 0.875rem;
        opacity: 0;
        visibility: hidden;
        transition: all 200ms ease;
        white-space: nowrap;
        z-index: 10;
      }
      .tooltip-text::after {
        content: "";
        position: absolute;
        top: 100%;
        left: 50%;
        transform: translateX(-50%);
        border: 5px solid transparent;
        border-top-color: #1f2937;
      }

      .focus-visible:focus {
        outline: 2px solid #3b82f6;
        outline-offset: 2px;
      }

      .cond-option.selected,
      .defect-option.selected {
        border-color: #3b82f6;
        background: rgba(59, 130, 246, 0.06);
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15) inset;
      }
      .cond-option.selected .radio-indicator,
      .defect-option.selected .radio-indicator {
        background: #3b82f6;
        border-color: #1d4ed8;
      }
    </style>
  </head>

  <body
    class="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100"
  >
    <a
      href="#main"
      class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-blue-600 text-white px-4 py-2 rounded-md z-50"
      >Aller au contenu principal</a
    >

    <!-- Navigation -->
    <nav
      class="bg-white/90 backdrop-blur-md border-b border-white/20 sticky top-0 z-40"
    >
      <div class="max-w-6xl mx-auto px-4 py-2">
        <div class="flex items-center justify-between">
          <a
            href="/"
            class="flex items-center gap-2"
            aria-label="Je me défends - Accueil"
          >
            <img
              src="/static/images/logo_jemedefends.svg"
              alt=""
              class="w-36 md:w-40"
              width="160"
              height="40"
            />
          </a>

          <!-- Indicateurs d'étapes (desktop) -->
          <div
            class="hidden md:flex gap-2 step-indicators-nav"
            role="tablist"
            aria-label="Étapes du formulaire"
          >
            <button
              type="button"
              class="step-indicator px-4 py-2 rounded-full text-sm font-medium transition-all active"
              data-step="buyer_info"
              role="tab"
              aria-selected="true"
              tabindex="0"
            >
              <span>1. Vos infos</span>
            </button>
            <button
              type="button"
              class="step-indicator px-4 py-2 rounded-full text-sm font-medium transition-all pending"
              data-step="seller_info"
              role="tab"
              aria-selected="false"
              tabindex="-1"
            >
              <span>2. Vendeur</span>
            </button>
            <button
              type="button"
              class="step-indicator px-4 py-2 rounded-full text-sm font-medium transition-all pending"
              data-step="purchase_info"
              role="tab"
              aria-selected="false"
              tabindex="-1"
            >
              <span>3. Achat</span>
            </button>
            <button
              type="button"
              class="step-indicator px-4 py-2 rounded-full text-sm font-medium transition-all pending"
              data-step="problem_info"
              role="tab"
              aria-selected="false"
              tabindex="-1"
            >
              <span>4. Problème</span>
            </button>
          </div>
        </div>
      </div>
    </nav>

    <main id="main" class="max-w-3xl mx-auto px-4 py-6 md:py-8 pb-24 md:pb-8">
      <!-- En-tête -->
      <header class="text-center mb-6 md:mb-8 animate-fade-in">
        <div class="flex items-center justify-center gap-3 mb-4">
          <div
            class="p-3 bg-gradient-to-br from-emerald-600 to-green-600 rounded-xl shadow-lg"
          >
            <svg
              class="w-7 h-7 text-white"
              fill="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"
              />
            </svg>
          </div>
          <h1 class="text-2xl md:text-4xl font-extrabold text-gray-900">
            Générer ma lettre
          </h1>
        </div>
        <p class="text-base md:text-lg text-gray-700 font-semibold">
          Créez une
          <span class="text-emerald-600 font-bold"
            >mise en demeure conforme</span
          >
          prête à envoyer
        </p>
        <p class="text-sm md:text-base text-gray-500 font-medium">
          Remplissez les informations pas à pas
        </p>
      </header>

      <!-- Bouton de test (développement) -->
      <div
        class="mb-4 text-center"
        id="test-fill-container"
        style="display: none;"
      >
        <button
          type="button"
          id="test-fill-btn"
          class="inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors focus-visible"
        >
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path
              d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"
            />
          </svg>
          Remplir avec données de test
        </button>
      </div>

      <!-- Barre de progression -->
      <section class="mb-6 md:mb-8" aria-label="Progression du formulaire">
        <div
          class="flex justify-between text-xs md:text-sm font-semibold text-gray-600 mb-2"
        >
          <span>Progression du formulaire</span>
          <span id="progress-percent" aria-live="polite">0% complété</span>
        </div>
        <div
          class="relative w-full bg-gray-200/60 rounded-full h-3 shadow-inner"
        >
          <div
            id="progress-bar"
            class="absolute top-0 left-0 h-full bg-gradient-to-r from-emerald-500 to-green-600 rounded-full transition-all"
            style="width: 0%"
            role="progressbar"
            aria-valuenow="0"
            aria-valuemin="0"
            aria-valuemax="100"
          >
            <div
              class="absolute right-0 top-1/2 -translate-y-1/2 translate-x-1/2 w-3 h-3 bg-white border-2 border-emerald-500 rounded-full"
            ></div>
          </div>
        </div>
      </section>

      <!-- Toast de sauvegarde -->
      <div
        id="auto-save-indicator"
        class="auto-save-indicator"
        aria-live="polite"
        aria-atomic="true"
      >
        <div class="flex items-center gap-2">
          <span class="w-2 h-2 bg-current rounded-full animate-pulse"></span>
          <span id="save-status">Sauvegarde...</span>
        </div>
      </div>

      <!-- Formulaire -->
      <div
        class="bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl border border-white/60 overflow-hidden animate-slide-in"
      >
        <form
          id="letter-form"
          data-form-slug="mise_en_demeure_v1"
          novalidate
          role="form"
          aria-label="Formulaire de mise en demeure"
        >
          <!-- Étape 1: Vos informations -->
          <section
            id="step-buyer-info"
            class="step-section active p-6 border-b border-gray-100"
            role="tabpanel"
            aria-labelledby="step-1-title"
          >
            <div class="flex items-center gap-4 mb-6">
              <div
                class="p-3 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl shadow-lg"
              >
                <svg
                  class="w-7 h-7 text-white"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                  aria-hidden="true"
                >
                  <path
                    d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"
                  />
                </svg>
              </div>
              <div>
                <h2
                  id="step-1-title"
                  class="text-xl md:text-2xl font-bold text-gray-900"
                >
                  Vos informations
                </h2>
                <p class="text-sm text-gray-600">
                  Ces informations apparaîtront sur votre lettre
                </p>
              </div>
            </div>

            <div class="space-y-6">
              <!-- Prénom et nom -->
              <div class="form-group">
                <label
                  for="buyer-name"
                  class="block text-sm font-bold mb-2 text-gray-700"
                >
                  Prénom et nom
                  <span class="text-red-500" aria-label="obligatoire">*</span>
                </label>
                <div class="field-group relative">
                  <input
                    id="buyer-name"
                    name="buyer_name"
                    data-step="buyer_info"
                    type="text"
                    required
                    minlength="2"
                    maxlength="100"
                    placeholder="Ex: Jean Dupont"
                    class="w-full px-4 py-3 bg-gray-50/50 border-2 border-gray-200 rounded-2xl focus:border-blue-500 focus:bg-white transition-all font-medium focus-visible"
                    aria-describedby="buyer-name-error buyer-name-help"
                  />
                  <div
                    class="absolute right-3 top-1/2 -translate-y-1/2 opacity-0 transition-opacity"
                    id="buyer-name-check"
                  >
                    <svg
                      class="w-5 h-5 text-green-500"
                      fill="currentColor"
                      viewBox="0 0 20 20"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                        clip-rule="evenodd"
                      />
                    </svg>
                  </div>
                </div>
                <p id="buyer-name-help" class="text-xs text-gray-500 mt-1">
                  Votre prénom et nom tel qu'ils apparaîtront sur la lettre
                </p>
                <p
                  id="buyer-name-error"
                  class="error-message hidden mt-2 text-red-600 text-sm font-medium"
                  role="alert"
                ></p>
              </div>

              <!-- Adresse complète -->
              <div class="form-group">
                <label
                  for="buyer-address"
                  class="block text-sm font-bold mb-2 text-gray-700"
                >
                  Votre adresse
                  <span class="text-red-500" aria-label="obligatoire">*</span>
                </label>

                <!-- Champ de recherche principal -->
                <div class="relative mb-3" style="overflow:visible;">
                  <input
                    id="buyer-address"
                    name="buyer_address"
                    data-step="buyer_info"
                    type="text"
                    maxlength="200"
                    placeholder="Tapez votre adresse pour l'autocomplétion..."
                    class="w-full px-4 py-3 bg-gray-50/50 border-2 border-gray-200 rounded-2xl focus:border-blue-500 focus:bg-white transition-all font-medium focus-visible"
                    autocomplete="off"
                    aria-describedby="buyer-address-error buyer-address-help"
                  />
                  <div
                    id="buyer-address-suggestions"
                    class="address-suggestions absolute w-full bg-white border border-gray-200 rounded-xl shadow-lg overflow-y-auto hidden"
                  ></div>
                </div>

                <!-- Champs détaillés -->
                <div class="space-y-3">
                  <div
                    class="address-grid grid grid-cols-1 md:grid-cols-2 gap-3"
                  >
                    <input
                      id="buyer-address-line1"
                      name="buyer_address_line_1"
                      data-step="buyer_info"
                      type="text"
                      required
                      placeholder="Numéro et rue"
                      class="w-full px-4 py-3 bg-gray-50/50 border-2 border-gray-200 rounded-2xl focus:border-blue-500 focus:bg-white transition-all font-medium text-sm focus-visible"
                      aria-label="Ligne d'adresse 1"
                    />
                    <input
                      id="buyer-address-line2"
                      name="buyer_address_line_2"
                      type="text"
                      placeholder="Complément (optionnel)"
                      class="w-full px-4 py-3 bg-gray-50/50 border-2 border-gray-200 rounded-2xl focus:border-blue-500 focus:bg-white transition-all font-medium text-sm focus-visible"
                      aria-label="Ligne d'adresse 2"
                    />
                  </div>
                  <div
                    class="address-grid grid grid-cols-1 md:grid-cols-3 gap-3"
                  >
                    <input
                      id="buyer-postal-code"
                      name="buyer_postal_code"
                      data-step="buyer_info"
                      type="text"
                      required
                      placeholder="Code postal"
                      pattern="[0-9]{5}"
                      maxlength="5"
                      class="w-full px-4 py-3 bg-gray-50/50 border-2 border-gray-200 rounded-2xl focus:border-blue-500 focus:bg-white transition-all font-medium text-sm focus-visible"
                      aria-label="Code postal"
                    />
                    <input
                      id="buyer-city"
                      name="buyer_city"
                      data-step="buyer_info"
                      type="text"
                      required
                      placeholder="Ville"
                      class="w-full px-4 py-3 bg-gray-50/50 border-2 border-gray-200 rounded-2xl focus:border-blue-500 focus:bg-white transition-all font-medium text-sm focus-visible"
                      aria-label="Ville"
                    />
                    <select
                      id="buyer-country"
                      name="buyer_country"
                      class="w-full px-4 py-3 bg-gray-50/50 border-2 border-gray-200 rounded-2xl focus:border-blue-500 focus:bg-white transition-all font-medium text-sm focus-visible"
                      aria-label="Pays"
                      data-step="buyer_info"
                      required
                    >
                      <option value="FR">France</option>
                      <option value="BE">Belgique</option>
                      <option value="DE">Allemagne</option>
                      <option value="ES">Espagne</option>
                      <option value="IT">Italie</option>
                      <option value="NL">Pays-Bas</option>
                      <option value="LU">Luxembourg</option>
                      <option value="CH">Suisse</option>
                      <option value="OTHER">Autre</option>
                    </select>
                  </div>
                </div>

                <p id="buyer-address-help" class="text-xs text-gray-500 mt-2">
                  Tapez votre adresse pour bénéficier de l'autocomplétion, ou
                  remplissez manuellement les champs
                </p>
                <p
                  id="buyer-address-error"
                  class="error-message hidden mt-2 text-red-600 text-sm font-medium"
                  role="alert"
                ></p>
              </div>

              <!-- Email optionnel -->
              <div class="form-group">
                <label
                  for="buyer-email"
                  class="block text-sm font-bold mb-2 text-gray-700"
                >
                  Email <span class="text-gray-400">(optionnel)</span>
                </label>
                <div class="field-group relative">
                  <input
                    id="buyer-email"
                    name="buyer_email"
                    data-step="buyer_info"
                    type="email"
                    maxlength="255"
                    placeholder="jean.dupont@email.com"
                    class="w-full px-4 py-3 bg-gray-50/50 border-2 border-gray-200 rounded-2xl focus:border-blue-500 focus:bg-white transition-all font-medium focus-visible"
                    aria-describedby="buyer-email-error buyer-email-help"
                  />
                  <div
                    class="absolute right-3 top-1/2 -translate-y-1/2 opacity-0 transition-opacity"
                    id="buyer-email-check"
                  >
                    <svg
                      class="w-5 h-5 text-green-500"
                      fill="currentColor"
                      viewBox="0 0 20 20"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                        clip-rule="evenodd"
                      />
                    </svg>
                  </div>
                </div>
                <p id="buyer-email-help" class="text-xs text-gray-500 mt-1">
                  Pour recevoir une copie de votre lettre
                </p>
                <p
                  id="buyer-email-error"
                  class="error-message hidden mt-2 text-red-600 text-sm font-medium"
                  role="alert"
                ></p>
                <div id="email-suggestion" class="mt-2"></div>
              </div>
            </div>

            <!-- Navigation -->
            <div class="flex justify-end mt-8">
              <button
                type="button"
                id="continue-seller-info"
                disabled
                class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold py-3 px-6 rounded-2xl hover:shadow-lg transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none focus-visible"
              >
                Continuer vers le vendeur
                <svg
                  class="w-5 h-5 inline ml-2"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
                    clip-rule="evenodd"
                  />
                </svg>
              </button>
            </div>
          </section>

          <!-- Étape 2: Informations vendeur -->
          <section
            id="step-seller-info"
            class="step-section hidden p-6 border-b border-gray-100"
            role="tabpanel"
            aria-labelledby="step-2-title"
          >
            <div class="flex items-center gap-4 mb-6">
              <div
                class="p-3 bg-gradient-to-r from-purple-500 to-purple-600 rounded-2xl shadow-lg"
              >
                <svg
                  class="w-7 h-7 text-white"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                  aria-hidden="true"
                >
                  <path
                    d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"
                  />
                </svg>
              </div>
              <div>
                <h2
                  id="step-2-title"
                  class="text-xl md:text-2xl font-bold text-gray-900"
                >
                  Informations du vendeur
                </h2>
                <p class="text-sm text-gray-600">
                  La personne ou société qui vous a vendu le produit
                </p>
              </div>
            </div>

            <div class="space-y-6">
              <!-- Nom du vendeur -->
              <div class="form-group">
                <label
                  for="seller-name"
                  class="block text-sm font-bold mb-2 text-gray-700"
                >
                  Nom du vendeur
                  <span class="text-red-500" aria-label="obligatoire">*</span>
                </label>
                <div class="field-group relative">
                  <input
                    id="seller-name"
                    name="seller_name"
                    data-step="seller_info"
                    type="text"
                    required
                    minlength="2"
                    maxlength="100"
                    placeholder="Ex: Boutique Tech SARL ou Marie Martin"
                    class="w-full px-4 py-3 bg-gray-50/50 border-2 border-gray-200 rounded-2xl focus:border-blue-500 focus:bg-white transition-all font-medium focus-visible"
                    aria-describedby="seller-name-error seller-name-help"
                  />
                  <div
                    class="absolute right-3 top-1/2 -translate-y-1/2 opacity-0 transition-opacity"
                    id="seller-name-check"
                  >
                    <svg
                      class="w-5 h-5 text-green-500"
                      fill="currentColor"
                      viewBox="0 0 20 20"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                        clip-rule="evenodd"
                      />
                    </svg>
                  </div>
                </div>
                <p id="seller-name-help" class="text-xs text-gray-500 mt-1">
                  Nom de la personne ou de l'entreprise
                </p>
                <p
                  id="seller-name-error"
                  class="error-message hidden mt-2 text-red-600 text-sm font-medium"
                  role="alert"
                ></p>
              </div>

              <!-- Adresse vendeur -->
              <div class="form-group">
                <label
                  for="seller-address"
                  class="block text-sm font-bold mb-2 text-gray-700"
                >
                  Adresse du vendeur
                  <span class="text-red-500" aria-label="obligatoire">*</span>
                </label>

                <!-- Champ de recherche principal -->
                <div class="relative mb-3">
                  <input
                    id="seller-address"
                    name="seller_address"
                    data-step="seller_info"
                    type="text"
                    maxlength="200"
                    placeholder="Tapez l'adresse pour l'autocomplétion..."
                    class="w-full px-4 py-3 bg-gray-50/50 border-2 border-gray-200 rounded-2xl focus:border-blue-500 focus:bg-white transition-all font-medium focus-visible"
                    autocomplete="off"
                    aria-describedby="seller-address-error seller-address-help"
                  />
                  <div
                    id="seller-address-suggestions"
                    class="address-suggestions absolute w-full bg-white border border-gray-200 rounded-xl shadow-lg overflow-y-auto hidden"
                  ></div>
                </div>

                <!-- Champs détaillés -->
                <div class="space-y-3">
                  <div
                    class="address-grid grid grid-cols-1 md:grid-cols-2 gap-3"
                  >
                    <input
                      id="seller-address-line1"
                      name="seller_address_line_1"
                      data-step="seller_info"
                      type="text"
                      required
                      placeholder="Numéro et rue"
                      class="w-full px-4 py-3 bg-gray-50/50 border-2 border-gray-200 rounded-2xl focus:border-blue-500 focus:bg-white transition-all font-medium text-sm focus-visible"
                      aria-label="Ligne d'adresse 1 vendeur"
                    />
                    <input
                      id="seller-address-line2"
                      name="seller_address_line_2"
                      type="text"
                      placeholder="Complément (optionnel)"
                      class="w-full px-4 py-3 bg-gray-50/50 border-2 border-gray-200 rounded-2xl focus:border-blue-500 focus:bg-white transition-all font-medium text-sm focus-visible"
                      aria-label="Ligne d'adresse 2 vendeur"
                    />
                  </div>
                  <div
                    class="address-grid grid grid-cols-1 md:grid-cols-3 gap-3"
                  >
                    <input
                      id="seller-postal-code"
                      name="seller_postal_code"
                      data-step="seller_info"
                      type="text"
                      required
                      placeholder="Code postal"
                      pattern="[0-9]{5}"
                      maxlength="5"
                      class="w-full px-4 py-3 bg-gray-50/50 border-2 border-gray-200 rounded-2xl focus:border-blue-500 focus:bg-white transition-all font-medium text-sm focus-visible"
                      aria-label="Code postal vendeur"
                    />
                    <input
                      id="seller-city"
                      name="seller_city"
                      data-step="seller_info"
                      type="text"
                      required
                      placeholder="Ville"
                      class="w-full px-4 py-3 bg-gray-50/50 border-2 border-gray-200 rounded-2xl focus:border-blue-500 focus:bg-white transition-all font-medium text-sm focus-visible"
                      aria-label="Ville vendeur"
                    />
                    <select
                      id="seller-country"
                      name="seller_country"
                      class="w-full px-4 py-3 bg-gray-50/50 border-2 border-gray-200 rounded-2xl focus:border-blue-500 focus:bg-white transition-all font-medium text-sm focus-visible"
                      aria-label="Pays vendeur"
                      data-step="seller_info"
                      required
                    >
                      <option value="FR">France</option>
                      <option value="BE">Belgique</option>
                      <option value="DE">Allemagne</option>
                      <option value="ES">Espagne</option>
                      <option value="IT">Italie</option>
                      <option value="NL">Pays-Bas</option>
                      <option value="LU">Luxembourg</option>
                      <option value="CH">Suisse</option>
                      <option value="OTHER">Autre</option>
                    </select>
                  </div>
                </div>

                <p id="seller-address-help" class="text-xs text-gray-500 mt-2">
                  Adresse où vous avez acheté le produit ou siège social de
                  l'entreprise
                </p>
                <p
                  id="seller-address-error"
                  class="error-message hidden mt-2 text-red-600 text-sm font-medium"
                  role="alert"
                ></p>
              </div>
            </div>

            <!-- Navigation -->
            <div class="flex justify-between mt-8">
              <button
                type="button"
                id="back-to-buyer-info"
                class="bg-gray-100 text-gray-700 font-bold py-3 px-6 rounded-2xl hover:bg-gray-200 transition-all focus-visible"
              >
                <svg
                  class="w-5 h-5 inline mr-2"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                >
                  <path
                    fill-rule="evenodd"
                    d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"
                    clip-rule="evenodd"
                  />
                </svg>
                Retour
              </button>
              <button
                type="button"
                id="continue-purchase-info"
                disabled
                class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold py-3 px-6 rounded-2xl hover:shadow-lg transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none focus-visible"
              >
                Continuer vers l'achat
                <svg
                  class="w-5 h-5 inline ml-2"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
                    clip-rule="evenodd"
                  />
                </svg>
              </button>
            </div>
          </section>

          <!-- Étape 3: Informations achat -->
          <section
            id="step-purchase-info"
            class="step-section hidden p-6 border-b border-gray-100"
            role="tabpanel"
            aria-labelledby="step-3-title"
          >
            <div class="flex items-center gap-4 mb-6">
              <div
                class="p-3 bg-gradient-to-r from-emerald-500 to-green-600 rounded-2xl shadow-lg"
              >
                <svg
                  class="w-7 h-7 text-white"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                  aria-hidden="true"
                >
                  <path
                    d="M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2h5a1 1 0 110 2h-1v14a3 3 0 01-3 3H6a3 3 0 01-3-3V6H2a1 1 0 110-2h5zM6 6v14a1 1 0 001 1h10a1 1 0 001-1V6H6zm3-2h6V2H9v2z"
                  />
                </svg>
              </div>
              <div>
                <h2
                  id="step-3-title"
                  class="text-xl md:text-2xl font-bold text-gray-900"
                >
                  Informations sur l'achat
                </h2>
                <p class="text-sm text-gray-600">
                  Détails du produit et de la transaction
                </p>
              </div>
            </div>

            <div class="space-y-6">
              <!-- Nom du produit -->
              <div class="form-group">
                <label
                  for="product-name"
                  class="block text-sm font-bold mb-2 text-gray-700"
                >
                  Nom du produit
                  <span class="text-red-500" aria-label="obligatoire">*</span>
                </label>
                <div class="field-group relative">
                  <input
                    id="product-name"
                    name="product_name"
                    data-step="purchase_info"
                    type="text"
                    required
                    minlength="3"
                    maxlength="200"
                    placeholder="Ex: iPhone 14 Pro 128GB Noir ou Machine à café Nespresso"
                    class="w-full px-4 py-3 bg-gray-50/50 border-2 border-gray-200 rounded-2xl focus:border-blue-500 focus:bg-white transition-all font-medium focus-visible"
                    aria-describedby="product-name-error product-name-help"
                  />
                  <div
                    class="absolute right-3 top-1/2 -translate-y-1/2 opacity-0 transition-opacity"
                    id="product-name-check"
                  >
                    <svg
                      class="w-5 h-5 text-green-500"
                      fill="currentColor"
                      viewBox="0 0 20 20"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                        clip-rule="evenodd"
                      />
                    </svg>
                  </div>
                </div>
                <p id="product-name-help" class="text-xs text-gray-500 mt-1">
                  Soyez précis : marque, modèle, couleur, taille...
                </p>
                <p
                  id="product-name-error"
                  class="error-message hidden mt-2 text-red-600 text-sm font-medium"
                  role="alert"
                ></p>
              </div>

              <!-- Date et prix -->
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- Date d'achat -->
                <div class="form-group">
                  <label
                    for="purchase-date"
                    class="block text-sm font-bold mb-2 text-gray-700"
                  >
                    Date d'achat
                    <span class="text-red-500" aria-label="obligatoire">*</span>
                  </label>
                  <div class="field-group relative">
                    <input
                      id="purchase-date"
                      name="purchase_date"
                      data-step="purchase_info"
                      type="date"
                      required
                      class="w-full px-4 py-3 bg-gray-50/50 border-2 border-gray-200 rounded-2xl focus:border-blue-500 focus:bg-white transition-all font-medium focus-visible"
                      aria-describedby="purchase-date-error purchase-date-help"
                    />
                    <div
                      class="absolute right-3 top-1/2 -translate-y-1/2 opacity-0 transition-opacity"
                      id="purchase-date-check"
                    >
                      <svg
                        class="w-5 h-5 text-green-500"
                        fill="currentColor"
                        viewBox="0 0 20 20"
                      >
                        <path
                          fill-rule="evenodd"
                          d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                          clip-rule="evenodd"
                        />
                      </svg>
                    </div>
                  </div>
                  <p id="purchase-date-help" class="text-xs text-gray-500 mt-1">
                    Date de votre achat
                  </p>
                  <p
                    id="purchase-date-error"
                    class="error-message hidden mt-2 text-red-600 text-sm font-medium"
                    role="alert"
                  ></p>
                </div>

                <!-- Prix -->
                <div class="form-group">
                  <label
                    for="product-price"
                    class="block text-sm font-bold mb-2 text-gray-700"
                  >
                    Prix payé
                    <span class="text-red-500" aria-label="obligatoire">*</span>
                  </label>
                  <div class="field-group relative">
                    <input
                      id="product-price"
                      name="product_price"
                      data-step="purchase_info"
                      type="number"
                      required
                      min="0"
                      max="999999"
                      step="0.01"
                      placeholder="899.99"
                      class="w-full px-4 py-3 bg-gray-50/50 border-2 border-gray-200 rounded-2xl focus:border-blue-500 focus:bg-white transition-all font-medium focus-visible"
                      aria-describedby="product-price-error product-price-help"
                    />
                    <div
                      class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm font-medium"
                    >
                      €
                    </div>
                    <div
                      class="absolute right-8 top-1/2 -translate-y-1/2 opacity-0 transition-opacity"
                      id="product-price-check"
                    >
                      <svg
                        class="w-5 h-5 text-green-500"
                        fill="currentColor"
                        viewBox="0 0 20 20"
                      >
                        <path
                          fill-rule="evenodd"
                          d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                          clip-rule="evenodd"
                        />
                      </svg>
                    </div>
                  </div>
                  <p id="product-price-help" class="text-xs text-gray-500 mt-1">
                    Montant total payé en euros
                  </p>
                  <p
                    id="product-price-error"
                    class="error-message hidden mt-2 text-red-600 text-sm font-medium"
                    role="alert"
                  ></p>
                </div>
              </div>

              <!-- État du produit -->
              <div class="form-group">
                <fieldset>
                  <legend class="block text-sm font-bold mb-3 text-gray-700">
                    État du produit lors de l'achat
                    <span class="text-red-500" aria-label="obligatoire">*</span>
                  </legend>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <label
                      class="cond-option cursor-pointer p-4 border-2 border-gray-200 rounded-2xl hover:border-blue-300 transition-all focus-within:border-blue-500"
                      for="condition-new"
                    >
                      <div class="flex items-center gap-3">
                        <div class="radio-indicator relative">
                          <input
                            id="condition-new"
                            name="product_condition"
                            data-step="purchase_info"
                            type="radio"
                            value="new"
                            required
                            class="sr-only"
                          />
                          <div
                            class="w-5 h-5 border-2 border-gray-300 rounded-full transition-all"
                          ></div>
                          <div
                            class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-2 h-2 bg-blue-600 rounded-full opacity-0 transition-opacity"
                          ></div>
                        </div>
                        <div>
                          <div class="font-semibold text-gray-900">
                            Produit neuf
                          </div>
                          <div class="text-sm text-gray-600">
                            Jamais utilisé, dans son emballage
                          </div>
                        </div>
                      </div>
                    </label>
                    <label
                      class="cond-option cursor-pointer p-4 border-2 border-gray-200 rounded-2xl hover:border-blue-300 transition-all focus-within:border-blue-500"
                      for="condition-used"
                    >
                      <div class="flex items-center gap-3">
                        <div class="radio-indicator relative">
                          <input
                            id="condition-used"
                            name="product_condition"
                            data-step="purchase_info"
                            type="radio"
                            value="used"
                            required
                            class="sr-only"
                          />
                          <div
                            class="w-5 h-5 border-2 border-gray-300 rounded-full transition-all"
                          ></div>
                          <div
                            class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-2 h-2 bg-blue-600 rounded-full opacity-0 transition-opacity"
                          ></div>
                        </div>
                        <div>
                          <div class="font-semibold text-gray-900">
                            Produit d'occasion
                          </div>
                          <div class="text-sm text-gray-600">
                            Déjà utilisé par un précédent propriétaire
                          </div>
                        </div>
                      </div>
                    </label>
                  </div>
                </fieldset>
                <p
                  id="product-condition-error"
                  class="error-message hidden mt-2 text-red-600 text-sm font-medium"
                  role="alert"
                ></p>
              </div>
            </div>

            <!-- Navigation -->
            <div class="flex justify-between mt-8">
              <button
                type="button"
                id="back-to-seller-info"
                class="bg-gray-100 text-gray-700 font-bold py-3 px-6 rounded-2xl hover:bg-gray-200 transition-all focus-visible"
              >
                <svg
                  class="w-5 h-5 inline mr-2"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                >
                  <path
                    fill-rule="evenodd"
                    d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"
                    clip-rule="evenodd"
                  />
                </svg>
                Retour
              </button>
              <button
                type="button"
                id="continue-problem-info"
                disabled
                class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold py-3 px-6 rounded-2xl hover:shadow-lg transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none focus-visible"
              >
                Continuer vers le problème
                <svg
                  class="w-5 h-5 inline ml-2"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
                    clip-rule="evenodd"
                  />
                </svg>
              </button>
            </div>
          </section>

          <!-- Étape 4: Description du problème -->
          <section
            id="step-problem-info"
            class="step-section hidden p-6"
            role="tabpanel"
            aria-labelledby="step-4-title"
          >
            <div class="flex items-center gap-4 mb-6">
              <div
                class="p-3 bg-gradient-to-r from-red-500 to-red-600 rounded-2xl shadow-lg"
              >
                <svg
                  class="w-7 h-7 text-white"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                  aria-hidden="true"
                >
                  <path
                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"
                  />
                </svg>
              </div>
              <div>
                <h2
                  id="step-4-title"
                  class="text-xl md:text-2xl font-bold text-gray-900"
                >
                  Description du problème
                </h2>
                <p class="text-sm text-gray-600">
                  Expliquez le défaut ou problème rencontré
                </p>
              </div>
            </div>

            <div class="space-y-6">
              <!-- Type de défaut -->
              <div class="form-group">
                <fieldset>
                  <legend class="block text-sm font-bold mb-3 text-gray-700">
                    Type de problème
                    <span class="text-red-500" aria-label="obligatoire">*</span>
                  </legend>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <label
                      class="defect-option cursor-pointer p-4 border-2 border-gray-200 rounded-2xl hover:border-blue-300 transition-all focus-within:border-blue-500"
                      for="defect-appearance"
                    >
                      <div class="flex items-center gap-3">
                        <div class="radio-indicator relative">
                          <input
                            id="defect-appearance"
                            name="defect_type"
                            data-step="problem_info"
                            type="radio"
                            value="apparence"
                            required
                            class="sr-only"
                          />
                          <div
                            class="w-5 h-5 border-2 border-gray-300 rounded-full transition-all"
                          ></div>
                          <div
                            class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-2 h-2 bg-blue-600 rounded-full opacity-0 transition-opacity"
                          ></div>
                        </div>
                        <div>
                          <div class="font-semibold text-gray-900">
                            Problème d'apparence
                          </div>
                          <div class="text-sm text-gray-600">
                            Rayures, taches, décoloration...
                          </div>
                        </div>
                      </div>
                    </label>
                    <label
                      class="defect-option cursor-pointer p-4 border-2 border-gray-200 rounded-2xl hover:border-blue-300 transition-all focus-within:border-blue-500"
                      for="defect-function"
                    >
                      <div class="flex items-center gap-3">
                        <div class="radio-indicator relative">
                          <input
                            id="defect-function"
                            name="defect_type"
                            data-step="problem_info"
                            type="radio"
                            value="fonctionnement"
                            required
                            class="sr-only"
                          />
                          <div
                            class="w-5 h-5 border-2 border-gray-300 rounded-full transition-all"
                          ></div>
                          <div
                            class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-2 h-2 bg-blue-600 rounded-full opacity-0 transition-opacity"
                          ></div>
                        </div>
                        <div>
                          <div class="font-semibold text-gray-900">
                            Problème de fonctionnement
                          </div>
                          <div class="text-sm text-gray-600">
                            Ne marche pas, dysfonctionnement...
                          </div>
                        </div>
                      </div>
                    </label>
                  </div>
                </fieldset>
                <p
                  id="defect-type-error"
                  class="error-message hidden mt-2 text-red-600 text-sm font-medium"
                  role="alert"
                ></p>
              </div>

              <!-- Description détaillée -->
              <div class="form-group">
                <label
                  for="defect-description"
                  class="block text-sm font-bold mb-2 text-gray-700"
                >
                  Description précise du problème
                  <span class="text-red-500" aria-label="obligatoire">*</span>
                </label>
                <div class="field-group relative">
                  <textarea
                    id="defect-description"
                    name="defect_description"
                    data-step="problem_info"
                    required
                    minlength="20"
                    maxlength="1000"
                    rows="5"
                    placeholder="Décrivez précisément le problème : que s'est-il passé ? quand ? dans quelles circonstances ? Soyez factuel et détaillé."
                    class="w-full px-4 py-3 bg-gray-50/50 border-2 border-gray-200 rounded-2xl focus:border-blue-500 focus:bg-white transition-all font-medium resize-none focus-visible"
                    aria-describedby="defect-description-error defect-description-help"
                  ></textarea>
                  <div
                    class="absolute right-3 top-3 opacity-0 transition-opacity"
                    id="defect-description-check"
                  >
                    <svg
                      class="w-5 h-5 text-green-500"
                      fill="currentColor"
                      viewBox="0 0 20 20"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                        clip-rule="evenodd"
                      />
                    </svg>
                  </div>
                </div>
                <div class="flex justify-between items-center mt-2">
                  <p id="defect-description-help" class="text-xs text-gray-500">
                    Plus vous êtes précis, plus votre lettre sera efficace
                  </p>
                  <p class="text-xs text-gray-400" id="char-count">0/1000</p>
                </div>
                <p
                  id="defect-description-error"
                  class="error-message hidden mt-2 text-red-600 text-sm font-medium"
                  role="alert"
                ></p>
              </div>
            </div>

            <!-- Navigation finale -->
            <div class="flex justify-between mt-8">
              <button
                type="button"
                id="back-to-purchase-info"
                class="bg-gray-100 text-gray-700 font-bold py-3 px-6 rounded-2xl hover:bg-gray-200 transition-all focus-visible"
              >
                <svg
                  class="w-5 h-5 inline mr-2"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                >
                  <path
                    fill-rule="evenodd"
                    d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"
                    clip-rule="evenodd"
                  />
                </svg>
                Retour
              </button>
              <button
                type="submit"
                id="submit-btn"
                disabled
                class="bg-gradient-to-r from-emerald-600 to-green-600 text-white font-bold py-4 px-8 rounded-2xl hover:shadow-xl transition-all hover:-translate-y-1 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none text-lg focus-visible"
              >
                <svg
                  class="w-6 h-6 inline mr-2"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"
                  />
                </svg>
                Générer ma lettre
              </button>
            </div>
          </section>
        </form>
      </div>

      <!-- Navigation mobile -->
      <div class="mobile-nav fixed md:hidden p-4 z-30">
        <div class="flex justify-between gap-4">
          <button
            type="button"
            id="mobile-prev"
            disabled
            class="flex-1 bg-gray-100 text-gray-700 font-bold py-3 px-4 rounded-xl hover:bg-gray-200 transition-all disabled:opacity-50 disabled:cursor-not-allowed focus-visible"
          >
            <svg
              class="w-5 h-5 inline mr-2"
              viewBox="0 0 20 20"
              fill="currentColor"
            >
              <path
                fill-rule="evenodd"
                d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"
                clip-rule="evenodd"
              />
            </svg>
            Précédent
          </button>
          <button
            type="button"
            id="mobile-next"
            disabled
            class="flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold py-3 px-4 rounded-xl hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed focus-visible"
          >
            <span>Suivant</span>
            <svg
              class="w-5 h-5 inline ml-2"
              viewBox="0 0 20 20"
              fill="currentColor"
            >
              <path
                fill-rule="evenodd"
                d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
                clip-rule="evenodd"
              />
            </svg>
          </button>
        </div>
      </div>

      <!-- Message d'erreur global -->
      <div
        id="global-error"
        class="hidden fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 bg-red-50 border border-red-200 rounded-xl p-4 shadow-lg z-50"
        role="alert"
      >
        <div class="flex items-start gap-3">
          <svg
            class="w-5 h-5 text-red-500 mt-0.5 flex-shrink-0"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              fill-rule="evenodd"
              d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
              clip-rule="evenodd"
            />
          </svg>
          <div>
            <h3 class="font-medium text-red-800">Erreur</h3>
            <p class="text-sm text-red-700 mt-1" id="global-error-message"></p>
          </div>
          <button
            type="button"
            class="ml-auto text-red-400 hover:text-red-600"
            onclick="document.getElementById('global-error').classList.add('hidden')"
          >
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path
                fill-rule="evenodd"
                d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                clip-rule="evenodd"
              />
            </svg>
          </button>
        </div>
      </div>
    </main>

    <!-- Scripts -->
    <script src="/static/js/form_draft.js"></script>
  </body>
</html>
